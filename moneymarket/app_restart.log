[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------------< com.example:moneymarket >-----------------------
[INFO] Building Money Market Module 0.0.1-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot-maven-plugin:3.1.5:run (default-cli) > test-compile @ moneymarket >>>
[INFO] 
[INFO] --- maven-resources-plugin:3.3.1:resources (default-resources) @ moneymarket ---
[INFO] Copying 3 resources from src\main\resources to target\classes
[INFO] Copying 12 resources from src\main\resources to target\classes
[INFO] 
[INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ moneymarket ---
[INFO] Changes detected - recompiling the module! :source
[INFO] Compiling 127 source files with javac [debug deprecation release 17] to target\classes
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[INFO] 
[INFO] --- maven-resources-plugin:3.3.1:testResources (default-testResources) @ moneymarket ---
[INFO] Copying 1 resource from src\test\resources to target\test-classes
[INFO] 
[INFO] --- maven-compiler-plugin:3.11.0:testCompile (default-testCompile) @ moneymarket ---
[INFO] Changes detected - recompiling the module! :dependency
[INFO] Compiling 11 source files with javac [debug deprecation release 17] to target\test-classes
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[INFO] 
[INFO] <<< spring-boot-maven-plugin:3.1.5:run (default-cli) < test-compile @ moneymarket <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot-maven-plugin:3.1.5:run (default-cli) @ moneymarket ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.1.5)

2025-11-10 11:30:38 [main] INFO  c.e.m.MoneyMarketApplication [] - Starting MoneyMarketApplication using Java 21.0.9 with PID 6620 (C:\cbs_prototype\cbs3\moneymarket\target\classes started by Administrator in C:\cbs_prototype\cbs3\moneymarket)
2025-11-10 11:30:38 [main] DEBUG c.e.m.MoneyMarketApplication [] - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-11-10 11:30:38 [main] INFO  c.e.m.MoneyMarketApplication [] - The following 1 profile is active: "default"
2025-11-10 11:30:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-10 11:30:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate [] - Finished Spring Data repository scanning in 179 ms. Found 19 JPA repository interfaces.
2025-11-10 11:30:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer [] - Tomcat initialized with port(s): 8082 (http)
2025-11-10 11:30:43 [main] INFO  o.a.catalina.core.StandardService [] - Starting service [Tomcat]
2025-11-10 11:30:43 [main] INFO  o.a.catalina.core.StandardEngine [] - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-11-10 11:30:43 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] [] - Initializing Spring embedded WebApplicationContext
2025-11-10 11:30:43 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext [] - Root WebApplicationContext: initialization completed in 4239 ms
CORS Allowed Origins: [http://localhost:3000, http://localhost:4173, http://localhost:5173, http://localhost:5174, http://localhost:5175, http://localhost:5176, http://localhost:5177, http://localhost:5178, https://cbs3.vercel.app, https://moneymarket.duckdns.org]
2025-11-10 11:30:43 [main] INFO  o.f.c.i.license.VersionPrinter [] - Flyway Community Edition 9.16.3 by Redgate
2025-11-10 11:30:43 [main] INFO  o.f.c.i.license.VersionPrinter [] - See release notes here: https://rd.gt/416ObMi
2025-11-10 11:30:43 [main] INFO  o.f.c.i.license.VersionPrinter [] - 
2025-11-10 11:30:43 [main] INFO  com.zaxxer.hikari.HikariDataSource [] - HikariPool-1 - Starting...
2025-11-10 11:30:44 [main] INFO  com.zaxxer.hikari.pool.HikariPool [] - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@205159dc
2025-11-10 11:30:44 [main] INFO  com.zaxxer.hikari.HikariDataSource [] - HikariPool-1 - Start completed.
2025-11-10 11:30:44 [main] INFO  o.f.c.i.d.base.BaseDatabaseType [] - Database: jdbc:mysql://127.0.0.1:3306/moneymarketdb (MySQL 8.0)
2025-11-10 11:30:44 [main] INFO  o.f.core.internal.command.DbValidate [] - Successfully validated 13 migrations (execution time 00:00.048s)
2025-11-10 11:30:44 [main] INFO  o.f.core.internal.command.DbMigrate [] - Current version of schema `moneymarketdb`: 7
2025-11-10 11:30:45 [main] INFO  o.f.core.internal.command.DbMigrate [] - Migrating schema `moneymarketdb` to version "8 - fix acct bal for office accounts"
2025-11-10 11:30:45 [main] INFO  o.f.c.i.s.DefaultSqlScriptExecutor [] - +-----------------------------------------------------------+
| Info                                                      |
+-----------------------------------------------------------+
| Foreign key acct_bal_ibfk_1 does not exist, skipping drop |
+-----------------------------------------------------------+

2025-11-10 11:30:45 [main] INFO  o.f.core.internal.command.DbMigrate [] - Migrating schema `moneymarketdb` to version "9 - add future tran status"
2025-11-10 11:30:45 [main] ERROR o.f.core.internal.command.DbMigrate [] - Migration of schema `moneymarketdb` to version "9 - add future tran status" failed! Please restore backups and roll back database and code!
2025-11-10 11:30:45 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V9__add_future_tran_status.sql failed
-----------------------------------------------
SQL State  : 42000
Error Code : 1061
Message    : Duplicate key name 'idx_tran_status_value_date'
Location   : db/migration/V9__add_future_tran_status.sql (C:\cbs_prototype\cbs3\moneymarket\target\classes\db\migration\V9__add_future_tran_status.sql)
Line       : 17
Statement  : -- Add composite index for BOD queries (find future transactions by date)
CREATE INDEX idx_tran_status_value_date
ON Tran_Table(Tran_Status, Value_Date)
COMMENT 'Optimize BOD queries for future-dated transactions'

2025-11-10 11:30:45 [main] INFO  com.zaxxer.hikari.HikariDataSource [] - HikariPool-1 - Shutdown initiated...
2025-11-10 11:30:45 [main] INFO  com.zaxxer.hikari.HikariDataSource [] - HikariPool-1 - Shutdown completed.
2025-11-10 11:30:45 [main] INFO  o.a.catalina.core.StandardService [] - Stopping service [Tomcat]
2025-11-10 11:30:45 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger [] - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-10 11:30:45 [main] ERROR o.s.boot.SpringApplication [] - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V9__add_future_tran_status.sql failed
-----------------------------------------------
SQL State  : 42000
Error Code : 1061
Message    : Duplicate key name 'idx_tran_status_value_date'
Location   : db/migration/V9__add_future_tran_status.sql (C:\cbs_prototype\cbs3\moneymarket\target\classes\db\migration\V9__add_future_tran_status.sql)
Line       : 17
Statement  : -- Add composite index for BOD queries (find future transactions by date)
CREATE INDEX idx_tran_status_value_date
ON Tran_Table(Tran_Status, Value_Date)
COMMENT 'Optimize BOD queries for future-dated transactions'

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1166)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:940)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.example.moneymarket.MoneyMarketApplication.main(MoneyMarketApplication.java:14)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V9__add_future_tran_status.sql failed
-----------------------------------------------
SQL State  : 42000
Error Code : 1061
Message    : Duplicate key name 'idx_tran_status_value_date'
Location   : db/migration/V9__add_future_tran_status.sql (C:\cbs_prototype\cbs3\moneymarket\target\classes\db\migration\V9__add_future_tran_status.sql)
Line       : 17
Statement  : -- Add composite index for BOD queries (find future transactions by date)
CREATE INDEX idx_tran_status_value_date
ON Tran_Table(Tran_Status, Value_Date)
COMMENT 'Optimize BOD queries for future-dated transactions'

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.database.mysql.MySQLNamedLockTemplate.execute(MySQLNamedLockTemplate.java:58)
	at org.flywaydb.database.mysql.MySQLConnection.lock(MySQLConnection.java:152)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:196)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	... 18 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V9__add_future_tran_status.sql failed
-----------------------------------------------
SQL State  : 42000
Error Code : 1061
Message    : Duplicate key name 'idx_tran_status_value_date'
Location   : db/migration/V9__add_future_tran_status.sql (C:\cbs_prototype\cbs3\moneymarket\target\classes\db\migration\V9__add_future_tran_status.sql)
Line       : 17
Statement  : -- Add composite index for BOD queries (find future transactions by date)
CREATE INDEX idx_tran_status_value_date
ON Tran_Table(Tran_Status, Value_Date)
COMMENT 'Optimize BOD queries for future-dated transactions'

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 34 common frames omitted
Caused by: java.sql.SQLSyntaxErrorException: Duplicate key name 'idx_tran_status_value_date'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 40 common frames omitted
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  43.401 s
[INFO] Finished at: 2025-11-10T11:30:46+06:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.1.5:run (default-cli) on project moneymarket: Process terminated with exit code: 1 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
